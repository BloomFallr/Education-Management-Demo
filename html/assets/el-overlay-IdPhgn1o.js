import{F as T,t as I,o as S,C as D,n as $,r as V}from"./constants-DWAz7ei8.js";import{ac as b,z as _,V as A,a1 as F,m as U,h as H,b3 as j,D as q,b4 as K,aS as y,b as Z,S as k,g as G,H as J,q as L,Z as Q}from"./index-CauhVxhf.js";import{P as w}from"./vnode-RFtRU_sW.js";let f;const R=e=>{var o;if(!b)return 0;if(f!==void 0)return f;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const s=t.offsetWidth;t.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",t.appendChild(n);const a=n.offsetWidth;return(o=t.parentNode)==null||o.removeChild(t),f=s-a,f};function ie(e,o){if(!b)return;if(!o){e.scrollTop=0;return}const t=[];let s=o.offsetParent;for(;s!==null&&e!==s&&e.contains(s);)t.push(s),s=s.offsetParent;const n=o.offsetTop+t.reduce((i,u)=>i+u.offsetTop,0),a=n+o.offsetHeight,l=e.scrollTop,c=l+e.clientHeight;n<l?e.scrollTop=n:a>c&&(e.scrollTop=a-e.clientHeight)}const ue=(e,o,t,s)=>{let n={offsetX:0,offsetY:0};const a=i=>{const u=i.clientX,v=i.clientY,{offsetX:p,offsetY:h}=n,d=e.value.getBoundingClientRect(),g=d.left,C=d.top,P=d.width,Y=d.height,O=document.documentElement.clientWidth,W=document.documentElement.clientHeight,B=-g+p,N=-C+h,X=O-g-P+p,z=W-C-Y+h,M=x=>{let r=p+x.clientX-u,m=h+x.clientY-v;s!=null&&s.value||(r=Math.min(Math.max(r,B),X),m=Math.min(Math.max(m,N),z)),n={offsetX:r,offsetY:m},e.value&&(e.value.style.transform=`translate(${T(r)}, ${T(m)})`)},E=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",E)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",E)},l=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",a)},c=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",a)};_(()=>{A(()=>{t.value?l():c()})}),F(()=>{c()})},de=(e,o={})=>{U(e)||I("[useLockscreen]","You need to pass a ref param to this function");const t=o.ns||H("popup"),s=j(()=>t.bm("parent","hidden"));if(!b||S(document.body,s.value))return;let n=0,a=!1,l="0";const c=()=>{setTimeout(()=>{V(document==null?void 0:document.body,s.value),a&&document&&(document.body.style.width=l)},200)};q(e,i=>{if(!i){c();return}a=!S(document.body,s.value),a&&(l=document.body.style.width),n=R(t.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,v=D(document.body,"overflowY");n>0&&(u||v==="scroll")&&a&&(document.body.style.width=`calc(100% - ${n}px)`),$(document.body,s.value)}),K(()=>c())},ee=e=>{if(!e)return{onClick:y,onMousedown:y,onMouseup:y};let o=!1,t=!1;return{onClick:l=>{o&&t&&e(l),o=t=!1},onMousedown:l=>{o=l.target===l.currentTarget},onMouseup:l=>{t=l.target===l.currentTarget}}},te=Z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:k([String,Array,Object])},zIndex:{type:k([String,Number])}}),oe={click:e=>e instanceof MouseEvent},se="overlay";var ne=G({name:"ElOverlay",props:te,emits:oe,setup(e,{slots:o,emit:t}){const s=H(se),n=i=>{t("click",i)},{onClick:a,onMousedown:l,onMouseup:c}=ee(e.customMaskEvent?void 0:n);return()=>e.mask?J("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:l,onMouseup:c},[L(o,"default")],w.STYLE|w.CLASS|w.PROPS,["onClick","onMouseup","onMousedown"]):Q("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[L(o,"default")])}});const re=ne;export{re as E,de as a,ee as b,ie as s,ue as u};
