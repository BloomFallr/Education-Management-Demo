import{r as p,G as b,o as k,L as B,I as r,k as P,H as s,t as f,l as c}from"./index-CauhVxhf.js";import{E as U}from"./el-dialog-B2TCSZSx.js";import"./el-overlay-IdPhgn1o.js";import{E as C,a as I}from"./el-message-BlXH8VcA.js";import{E as N,a as q}from"./el-form-item-C075O6SC.js";import{l as w}from"./constants-DWAz7ei8.js";import{p as F}from"./adm-M6jV_13o.js";import{g as M}from"./stu-BOJDAIHm.js";import{f as $}from"./tea-CJRP_Dbk.js";import{E as z}from"./request-BnFEnbez.js";const D={class:"dialog-footer"},R={__name:"PasswordEdit",props:{identity:String},setup(_,{expose:g}){const i=_,t=p(!1),n=p(),v=b(),o=p({password:"",repassword:""}),E={password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,20}$/,message:"密码必须为6-20位非空字符",trigger:"blur"}],repassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(l,e,d)=>{o.value.password!==""&&e!==o.value.password?d(new Error("两次密码不一致")):d()},trigger:"blur"}]},V=()=>{o.value.password="",o.value.repassword="",t.value=!0},y=async()=>{var e;await((e=n.value)==null?void 0:e.validate());const l={id:v.id,password:o.value.password};i.identity==1?(console.log("学生"),await M(l)):i.identity==2?(console.log("教师"),await $(l)):i.identity==3&&(console.log("管理员"),await F(l)),z.success("编辑成功"),t.value=!1};return g({open:V}),(l,e)=>{const d=C,u=N,x=q,m=I,S=U;return k(),B(S,{modelValue:t.value,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value=a),title:"修改密码",width:"400",draggable:"",overflow:""},{footer:r(()=>[P("div",D,[s(m,{onClick:e[2]||(e[2]=a=>t.value=!1)},{default:r(()=>[f("取消")]),_:1}),s(m,{type:"primary",onClick:y},{default:r(()=>[f("确认")]),_:1})])]),default:r(()=>[s(x,{model:o.value,ref_key:"form",ref:n,size:"large",autocomplete:"off",rules:E},{default:r(()=>[s(u,{prop:"password"},{default:r(()=>[s(d,{"prefix-icon":c(w),placeholder:"请输入新密码",type:"password",modelValue:o.value.password,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.password=a)},null,8,["prefix-icon","modelValue"])]),_:1}),s(u,{prop:"repassword"},{default:r(()=>[s(d,{"prefix-icon":c(w),placeholder:"请再次输入新密码",type:"password",modelValue:o.value.repassword,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.repassword=a)},null,8,["prefix-icon","modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}};export{R as _};
