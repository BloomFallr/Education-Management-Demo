import{r as s,o as V,L as P,I as a,k as G,H as e,t as g,z as O,j as A,O as J,l as S,w as K,P as Q}from"./index-CauhVxhf.js";import{b as W,v as X}from"./el-message-box-72ezgMD2.js";import{E as Y,a as Z,b as ee}from"./el-main-1zPLywyB.js";import{E as ae}from"./el-pagination-tu8S2-45.js";import{E as B,a as U}from"./el-message-BlXH8VcA.js";import{E as te,a as le}from"./el-table-column-DDc4vDH_.js";import"./el-popper-CqdONIHR.js";import{E as ne}from"./el-empty-DlBGokpv.js";import{E as M,a as R}from"./el-form-item-C075O6SC.js";import{b as T,s as oe,e as re}from"./constants-DWAz7ei8.js";import{k as se,l as ie,m as ue,n as me}from"./adm-M6jV_13o.js";import{E as ce}from"./el-dialog-B2TCSZSx.js";import"./el-overlay-IdPhgn1o.js";import{E as w}from"./request-BnFEnbez.js";import"./aria-nkjrUMQ-.js";import"./focus-trap-CBJl3iZD.js";import"./index-r5W6hzzQ.js";import"./vnode-RFtRU_sW.js";const pe={class:"dialog-footer"},de={__name:"TeacherEdit",emits:["success"],setup($,{expose:t,emit:v}){const r=s(!1),E=v;t({open:d=>{r.value=!0,n.value={...d}}});const n=s({id:"",username:"",name:""}),h=s({username:[{required:!0,message:"请输入工号",trigger:"blur"},{pattern:/^\S{1,10}$/,message:"工号必须为1-10位非空字符",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{pattern:/^\S{1,10}$/,message:"姓名必须为1-10位非空字符",trigger:"blur"}]}),p=s(),C=async()=>{await p.value.validate(),n.value.id?(await se(n.value),w.success("编辑成功")):(await ie(n.value),w.success("添加成功")),r.value=!1,E("success")};return(d,o)=>{const y=B,b=M,k=R,l=U,u=ce;return V(),P(u,{modelValue:r.value,"onUpdate:modelValue":o[3]||(o[3]=m=>r.value=m),title:n.value.id?"编辑教师":"添加教师",width:"500",draggable:"",overflow:""},{footer:a(()=>[G("div",pe,[e(l,{onClick:o[2]||(o[2]=m=>r.value=!1)},{default:a(()=>[g("取消")]),_:1}),e(l,{type:"primary",onClick:C},{default:a(()=>[g("确认")]),_:1})])]),default:a(()=>[e(k,{ref_key:"formRef",ref:p,model:n.value,rules:h.value,"label-width":"100px",style:{"padding-right":"30px"}},{default:a(()=>[e(b,{label:"工号",prop:"username"},{default:a(()=>[e(y,{placeholder:"请输入工号",modelValue:n.value.username,"onUpdate:modelValue":o[0]||(o[0]=m=>n.value.username=m)},null,8,["modelValue"])]),_:1}),e(b,{label:"姓名",prop:"name"},{default:a(()=>[e(y,{placeholder:"请输入姓名",modelValue:n.value.name,"onUpdate:modelValue":o[1]||(o[1]=m=>n.value.name=m)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}},Ue={__name:"TeacherManagement",setup($){const t=s({name:"",currentPage:1,pageSize:10}),v=s([]),r=s(!1),E=s(0),i=async()=>{r.value=!0;const l=await ue(t.value);v.value=l.data.data.list,E.value=l.data.data.total,r.value=!1};O(()=>{i()});const n=()=>{t.value.currentPage=1,i()},h=()=>{t.value.name="",t.value.currentPage=1,i()},p=s(),C=()=>{p.value.open({})},d=l=>{p.value.open(l)},o=async l=>{await W.confirm("您确认删除该教师信息吗？","温馨提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",icon:Q(T)}).then(async()=>{await me(l.id),w.success("删除成功"),i()})},y=()=>{i()},b=l=>{t.value.currentPage=l,i()},k=l=>{t.value.pageSize=l,i()};return(l,u)=>{const m=B,_=M,f=U,z=R,D=Z,x=te,I=ne,H=le,L=ae,F=ee,N=Y,j=X;return V(),A(J,null,[e(N,null,{default:a(()=>[e(D,null,{default:a(()=>[e(z,{inline:""},{default:a(()=>[e(_,null,{default:a(()=>[e(m,{modelValue:t.value.name,"onUpdate:modelValue":u[0]||(u[0]=c=>t.value.name=c),placeholder:"姓名","prefix-icon":S(oe)},null,8,["modelValue","prefix-icon"])]),_:1}),e(_,{style:{float:"inline-end"}},{default:a(()=>[e(f,{type:"primary",onClick:h,round:"",plain:""},{default:a(()=>[g("重置")]),_:1})]),_:1}),e(_,{style:{float:"inline-end"}},{default:a(()=>[e(f,{type:"primary",onClick:n,round:"",plain:""},{default:a(()=>[g("搜索")]),_:1})]),_:1})]),_:1})]),_:1}),e(F,null,{default:a(()=>[K((V(),P(H,{data:v.value,border:"",style:{width:"100%"},height:"580px"},{empty:a(()=>[e(I,{description:"没有数据"})]),default:a(()=>[e(x,{prop:"username",label:"工号"}),e(x,{prop:"name",label:"姓名"}),e(x,{fixed:"right",label:"操作"},{default:a(({row:c})=>[e(f,{size:"small",type:"primary",onClick:q=>d(c),icon:S(re),circle:"",plain:""},null,8,["onClick","icon"]),e(f,{size:"small",type:"danger",onClick:q=>o(c),icon:S(T),circle:"",plain:""},null,8,["onClick","icon"])]),_:1})]),_:1},8,["data"])),[[j,r.value]]),e(z,{inline:"",style:{"margin-top":"10px","text-align":"right"}},{default:a(()=>[e(_,null,{default:a(()=>[e(f,{type:"primary",onClick:C,plain:""},{default:a(()=>[g("添加教师")]),_:1})]),_:1}),e(_,null,{default:a(()=>[e(L,{"current-page":t.value.currentPage,"onUpdate:currentPage":u[1]||(u[1]=c=>t.value.currentPage=c),"page-size":t.value.pageSize,"onUpdate:pageSize":u[2]||(u[2]=c=>t.value.pageSize=c),background:!0,"page-sizes":[10,15,20,25],layout:"sizes, total, prev, pager, next, jumper",total:E.value,onCurrentChange:b,onSizeChange:k},null,8,["current-page","page-size","total"])]),_:1})]),_:1})]),_:1})]),_:1}),e(de,{ref_key:"teacherEditRef",ref:p,onSuccess:y},null,512)],64)}}};export{Ue as default};
