import{r as S,G as E,z as C,j as M,H as i,I as o,o as T,k as r,x as l}from"./index-CauhVxhf.js";import{a as j,E as B}from"./el-table-column-DDc4vDH_.js";import"./el-popper-CqdONIHR.js";import{b as O}from"./stu-BOJDAIHm.js";import"./constants-DWAz7ei8.js";import"./request-BnFEnbez.js";import"./focus-trap-CBJl3iZD.js";const D={class:"timetable"},A={__name:"MyTimetable",setup(G){const g=({row:e,rowIndex:a,columnIndex:t})=>{if(t===0)return a<=4?a===0?{rowspan:5,colspan:1}:{rowspan:0,colspan:0}:a>=5&&a<=9?a===5?{rowspan:5,colspan:1}:{rowspan:0,colspan:0}:a===10?{rowspan:3,colspan:1}:{rowspan:0,colspan:0};if(t===2)return e.mon.name!==void 0?{rowspan:e.mon.end-e.mon.start+1,colspan:1}:{rowspan:1,colspan:1};if(t===3)return e.tue.name!==void 0?{rowspan:e.tue.end-e.tue.start+1,colspan:1}:{rowspan:1,colspan:1};if(t===4)return e.wed.name!==void 0?{rowspan:e.wed.end-e.wed.start+1,colspan:1}:{rowspan:1,colspan:1};if(t===5)return e.thu.name!==void 0?{rowspan:e.thu.end-e.thu.start+1,colspan:1}:{rowspan:1,colspan:1};if(t===6)return e.fri.name!==void 0?{rowspan:e.fri.end-e.fri.start+1,colspan:1}:{rowspan:1,colspan:1};if(t===7)return e.sat.name!==void 0?{rowspan:e.sat.end-e.sat.start+1,colspan:1}:{rowspan:1,colspan:1};if(t===8)return e.sun.name!==void 0?{rowspan:e.sun.end-e.sun.start+1,colspan:1}:{rowspan:1,colspan:1}},w=({row:e,rowIndex:a,columnIndex:t})=>{if(t===0){if(a===0)return{background:"#ffffc1",color:"black",fontWeight:600};if(a===5)return{background:"#ade5ce",color:"black",fontWeight:600};if(a===10)return{background:"#f2bfbf",color:"black",fontWeight:600}}else{if(t===1)return{background:"#909589",color:"black",fontWeight:400};if(t===2){if(e.mon.name!==void 0)return{background:"#d9e5fd",color:"black",fontWeight:400}}else if(t===3){if(e.tue.name!==void 0)return{background:"#d9e5fd",color:"black",fontWeight:400}}else if(t===4){if(e.wed.name!==void 0)return{background:"#d9e5fd",color:"black",fontWeight:400}}else if(t===5){if(e.thu.name!==void 0)return{background:"#d9e5fd",color:"black",fontWeight:400}}else if(t===6){if(e.fri.name!==void 0)return{background:"#d9e5fd",color:"black",fontWeight:400}}else if(t===7){if(e.sat.name!==void 0)return{background:"#d9e5fd",color:"black",fontWeight:400}}else if(t===8&&e.sun.name!==void 0)return{background:"#d9e5fd",color:"black",fontWeight:400}}},d=[{period:"上午",section:"1",mon:{},tue:{},wed:{},thu:{},fri:{},sat:{},sun:{}},{period:"上午",section:"2",mon:{},tue:{},wed:{},thu:{},fri:{},sat:{},sun:{}},{period:"上午",section:"3",mon:{},tue:{},wed:{},thu:{},fri:{},sat:{},sun:{}},{period:"上午",section:"4",mon:{},tue:{},wed:{},thu:{},fri:{},sat:{},sun:{}},{period:"上午",section:"5",mon:{},tue:{},wed:{},thu:{},fri:{},sat:{},sun:{}},{period:"下午",section:"6",mon:{},tue:{},wed:{},thu:{},fri:{},sat:{},sun:{}},{period:"下午",section:"7",mon:{},tue:{},wed:{},thu:{},fri:{},sat:{},sun:{}},{period:"下午",section:"8",mon:{},tue:{},wed:{},thu:{},fri:{},sat:{},sun:{}},{period:"下午",section:"9",mon:{},tue:{},wed:{},thu:{},fri:{},sat:{},sun:{}},{period:"下午",section:"10",mon:{},tue:{},wed:{},thu:{},fri:{},sat:{},sun:{}},{period:"晚上",section:"11",mon:{},tue:{},wed:{},thu:{},fri:{},sat:{},sun:{}},{period:"晚上",section:"12",mon:{},tue:{},wed:{},thu:{},fri:{},sat:{},sun:{}},{period:"晚上",section:"13",mon:{},tue:{},wed:{},thu:{},fri:{},sat:{},sun:{}}],s=S([]),k=E(),m=["mon","tue","wed","thu","fri","sat","sun"],b={一:1,二:2,三:3,四:4,五:5,六:6,日:7},_=/周(一|二|三|四|五|六|日)第(\d+)到(\d+)节/,W=/周(一|二|三|四|五|六|日)第(\d+)节/,v=async()=>{const e=await O(k.id);s.value=e.data.data,console.log(s.value);for(let a=0;a<s.value.length;a++){let t=s.value[a].time.split(",");for(let u=0;u<t.length;u++){let n=_.exec(t[u]),c=W.exec(t[u]);if(n){let p=b[n[1]],f=parseInt(n[2]),h=parseInt(n[3]),y=m[p-1];d[f-1][y]={name:s.value[a].name,teacher:s.value[a].teacher,place:s.value[a].place,start:f,end:h}}else if(c){let p=b[c[1]],f=parseInt(c[2]),h=m[p-1];d[f-1][h]={name:s.value[a].name,teacher:s.value[a].teacher,place:s.value[a].place,start:f,end:f}}}}};return C(()=>{v()}),(e,a)=>{const t=B,u=j;return T(),M("div",D,[i(u,{data:d,"header-cell-style":{background:"#b69e9e",color:"black",fontWeight:1e3},"span-method":g,"cell-style":w,"row-style":{height:"80px"},border:"",align:"center"},{default:o(()=>[i(t,{prop:"period",label:"时间",width:"50",align:"center"}),i(t,{prop:"section",label:"节次",width:"50",align:"center"}),i(t,{prop:"mon",label:"星期一",width:"150",align:"center"},{default:o(n=>[r("h4",null,l(n.row.mon.name),1),r("h5",null,l(n.row.mon.teacher),1),r("h5",null,l(n.row.mon.place),1)]),_:1}),i(t,{prop:"tue",label:"星期二",width:"150",align:"center"},{default:o(n=>[r("h4",null,l(n.row.tue.name),1),r("h5",null,l(n.row.tue.teacher),1),r("h5",null,l(n.row.tue.place),1)]),_:1}),i(t,{prop:"wed",label:"星期三",width:"150",align:"center"},{default:o(n=>[r("h4",null,l(n.row.wed.name),1),r("h5",null,l(n.row.wed.teacher),1),r("h5",null,l(n.row.wed.place),1)]),_:1}),i(t,{prop:"thu",label:"星期四",width:"150",align:"center"},{default:o(n=>[r("h4",null,l(n.row.thu.name),1),r("h5",null,l(n.row.thu.teacher),1),r("h5",null,l(n.row.thu.place),1)]),_:1}),i(t,{prop:"fri",label:"星期五",width:"150",align:"center"},{default:o(n=>[r("h4",null,l(n.row.fri.name),1),r("h5",null,l(n.row.fri.teacher),1),r("h5",null,l(n.row.fri.place),1)]),_:1}),i(t,{prop:"sat",label:"星期六",width:"150",align:"center"},{default:o(n=>[r("h4",null,l(n.row.sat.name),1),r("h5",null,l(n.row.sat.teacher),1),r("h5",null,l(n.row.sat.place),1)]),_:1}),i(t,{prop:"sun",label:"星期日",width:"150",align:"center"},{default:o(n=>[r("h4",null,l(n.row.sun.name),1),r("h5",null,l(n.row.sun.teacher),1),r("h5",null,l(n.row.sun.place),1)]),_:1})]),_:1})])}}};export{A as default};
